<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>FocusFlow — Productivity Hub</title>
  <meta name="description" content="Simple single-file productivity web app: To‑Do, Pomodoro, Quick Notes, and Daily Progress.">
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#7c3aed;--accent-2:#06b6d4;--glass: rgba(255,255,255,0.04)}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071021 0%, #071527 50%);color:#e6eef6;padding:20px}
    .wrap{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 380px;gap:20px}
    header{grid-column:1/-1;display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{margin:0;font-size:20px;letter-spacing:0.4px}
    .sub{color:var(--muted);font-size:13px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}

    /* Left column2444*/
    .todo{min-height:200px}
    .todo h2{margin:0 0 12px 0}
    .todo-input{display:flex;gap:8px;margin-bottom:12px}
    input[type=text]{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    button{background:var(--accent);border:0;padding:10px 12px;border-radius:8px;color:white;cursor:pointer}
    .list{display:flex;flex-direction:column;gap:8px}
    .task{display:flex;align-items:center;gap:10px;padding:10px;border-radius:8px;background:var(--glass)}
    .task .title{flex:1}
    .task.completed .title{text-decoration:line-through;color:var(--muted)}
    .small{font-size:13px;color:var(--muted)}

    /* Right column */
    .right{display:flex;flex-direction:column;gap:16px}
    .timer{display:flex;flex-direction:column;align-items:center;gap:12px;text-align:center}
    .timer .big{font-size:44px;font-weight:700}
    .timer-controls{display:flex;gap:8px}

    /* Notes */
    textarea{width:100%;min-height:140px;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);resize:vertical;background:transparent;color:inherit}

    /* Progress */
    .progress{height:12px;background:rgba(255,255,255,0.04);border-radius:8px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%}

    /* Footer */
    footer{grid-column:1/-1;text-align:center;color:var(--muted);font-size:13px;margin-top:8px}

    /* Responsive */
    @media (max-width:980px){.wrap{grid-template-columns:1fr} .right{order:2}}
    @media (max-width:420px){h1{font-size:18px}.wrap{padding:0}}

    /* utilities */
    .row{display:flex;gap:8px;align-items:center}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;color:var(--muted);cursor:pointer}
    .tag{padding:6px 8px;background:rgba(255,255,255,0.02);border-radius:999px;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>FocusFlow</h1>
        <div class="sub">To‑Do • Pomodoro • Quick Notes — single-file web app</div>
      </div>
      <div class="row">
        <div class="tag" id="dateTag"></div>
        <button class="btn-ghost" id="themeToggle">Toggle Theme</button>
      </div>
    </header>

    <!-- Left column: To-do & Notes -->
    <main>
      <section class="card todo" aria-labelledby="todoTitle">
        <h2 id="todoTitle">To‑Do</h2>
        <div class="todo-input">
          <input id="taskInput" type="text" placeholder="Add a task and press Add or Enter" />
          <button id="addTask">Add</button>
        </div>
        <div class="row" style="justify-content:space-between;margin-bottom:8px">
          <div class="small">Completed: <span id="completedCount">0</span>/<span id="totalCount">0</span></div>
          <div>
            <button class="btn-ghost" id="clearCompleted">Clear Completed</button>
            <button class="btn-ghost" id="clearAll">Clear All</button>
          </div>
        </div>
        <div class="list" id="taskList" aria-live="polite"></div>

        <div style="margin-top:12px">
          <div class="small">Daily progress</div>
          <div class="progress" aria-hidden="true"><i id="progressBar"></i></div>
        </div>
      </section>

      <section class="card" style="margin-top:16px">
        <h2>Quick Notes</h2>
        <div class="small" style="margin-bottom:8px">Autosaves to your browser. Use Download to export.</div>
        <textarea id="notes" placeholder="Jot quick ideas, meeting notes, links..."></textarea>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="downloadNotes">Download Notes</button>
          <button id="clearNotes" class="btn-ghost">Clear Notes</button>
        </div>
      </section>
    </main>

    <!-- Right column: Pomodoro and Helpers -->
    <aside class="right">
      <section class="card timer" aria-labelledby="timerTitle">
        <h2 id="timerTitle">Pomodoro Timer</h2>
        <div class="big" id="timeDisplay">25:00</div>
        <div class="small" id="timerState">Ready</div>
        <div class="timer-controls">
          <button id="startBtn">Start</button>
          <button id="pauseBtn" class="btn-ghost">Pause</button>
          <button id="resetBtn" class="btn-ghost">Reset</button>
        </div>
        <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;justify-content:center">
          <button class="btn-ghost" data-min="25">25m</button>
          <button class="btn-ghost" data-min="15">15m</button>
          <button class="btn-ghost" data-min="5">5m</button>
        </div>
      </section>

      <section class="card">
        <h2>Focus Helpers</h2>
        <div class="small">Quick actions to boost focus</div>
        <div style="display:flex;flex-direction:column;gap:8px;margin-top:10px">
          <button id="focusMusic">Play Focus Music</button>
          <button id="stopMusic" class="btn-ghost">Stop Music</button>
          <button id="copyTasks" class="btn-ghost">Copy Tasks</button>
        </div>
      </section>

      <section class="card">
        <h2>About</h2>
        <div class="small">Just for experiment test</section>
    </aside>

    <footer>Made by AGP • Your data stays in your browser (localStorage)</footer>
  </div>

  <script>
    // Utilities
    const $ = id=>document.getElementById(id);
    const today = new Date(); $('dateTag').textContent = today.toLocaleDateString();

    // ------------------ To-Do ------------------
    const taskInput = $('taskInput'); const taskList = $('taskList'); const addTaskBtn = $('addTask');
    const completedCount = $('completedCount'); const totalCount = $('totalCount'); const progressBar = $('progressBar');

    let tasks = JSON.parse(localStorage.getItem('ff_tasks')||'[]');
    function renderTasks(){
      taskList.innerHTML='';
      tasks.forEach((t, i)=>{
        const div = document.createElement('div'); div.className = 'task'+(t.done? ' completed':'');
        div.innerHTML = `<input type=checkbox ${t.done? 'checked':''} data-i=${i} /> <div class=title>${escapeHtml(t.title)}</div> <button class=btn-ghost data-del=${i}>Del</button>`;
        taskList.appendChild(div);
      });
      $('totalCount').textContent = tasks.length;
      $('completedCount').textContent = tasks.filter(t=>t.done).length;
      const pct = tasks.length? Math.round(100*(tasks.filter(t=>t.done).length)/tasks.length):0; progressBar.style.width = pct+'%';
      localStorage.setItem('ff_tasks', JSON.stringify(tasks));
    }
    function escapeHtml(s){return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;')}

    addTaskBtn.addEventListener('click', ()=>{
      const v = taskInput.value.trim(); if(!v) return; tasks.unshift({title:v,done:false}); taskInput.value=''; renderTasks();
    });
    taskInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ addTaskBtn.click(); }});

    taskList.addEventListener('change', e=>{
      if(e.target.matches('input[type=checkbox]')){
        const i = +e.target.dataset.i; tasks[i].done = e.target.checked; renderTasks();
      }
    });
    taskList.addEventListener('click', e=>{
      if(e.target.matches('[data-del]')){ tasks.splice(+e.target.dataset.del,1); renderTasks(); }
    });
    $('clearCompleted').addEventListener('click', ()=>{ tasks = tasks.filter(t=>!t.done); renderTasks(); });
    $('clearAll').addEventListener('click', ()=>{ if(confirm('Clear all tasks?')){ tasks=[]; renderTasks(); }});

    renderTasks();

    // ------------------ Notes ------------------
    const notes = $('notes'); notes.value = localStorage.getItem('ff_notes')||'';
    notes.addEventListener('input', ()=> localStorage.setItem('ff_notes', notes.value));
    $('downloadNotes').addEventListener('click', ()=>{
      const blob = new Blob([notes.value||''], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download = 'notes.txt'; a.click(); URL.revokeObjectURL(url);
    });
    $('clearNotes').addEventListener('click', ()=>{ if(confirm('Clear notes?')){ notes.value=''; localStorage.removeItem('ff_notes'); }});

    // ------------------ Pomodoro ------------------
    let timer = {duration:25*60, remaining:25*60, running:false, interval:null};
    const timeDisplay = $('timeDisplay'), timerState = $('timerState');
    function formatTime(s){ const m = Math.floor(s/60); const sec = s%60; return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}` }
    function updateDisplay(){ timeDisplay.textContent = formatTime(timer.remaining); }
    function startTimer(){ if(timer.running) return; timer.running=true; timerState.textContent='Working'; timer.interval = setInterval(()=>{
      timer.remaining--; if(timer.remaining<=0){ clearInterval(timer.interval); timer.running=false; timerState.textContent='Finished'; notify('Pomodoro finished!'); tickComplete(); }
      updateDisplay();
    },1000); }
    function pauseTimer(){ if(timer.interval) clearInterval(timer.interval); timer.running=false; timerState.textContent='Paused'; }
    function resetTimer(){ pauseTimer(); timer.remaining = timer.duration; updateDisplay(); timerState.textContent='Ready'; }

    $('startBtn').addEventListener('click', startTimer); $('pauseBtn').addEventListener('click', pauseTimer); $('resetBtn').addEventListener('click', resetTimer);
    document.querySelectorAll('[data-min]').forEach(b=>b.addEventListener('click', ()=>{
      const m = +b.dataset.min; timer.duration = timer.remaining = m*60; updateDisplay(); timerState.textContent='Ready';
    }));

    // mark a pomodoro completion as a small productivity tick (adds a completed task placeholder)
    function tickComplete(){
      tasks.unshift({title:'Pomodoro done — '+new Date().toLocaleTimeString(), done:true}); renderTasks();
      // small sound
      playBeep();
    }

    // ------------------ Helpers: audio, copy tasks, notifications ------------------
    let audio;
    function createAudio(){ if(audio) return; audio = new Audio(); audio.loop=true; // small ambient tone (data URI simple)
      audio.src = 'data:audio/mpeg;base64,//uQZAAAAAAAAAAAAAAAAAAAAAA...'; // placeholder silent site-safe src (b64 truncated)
    }
    function playBeep(){ try{ const a = new Audio('data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA='); a.play(); }catch(e){}
    }
    $('focusMusic').addEventListener('click', ()=>{ try{ createAudio(); audio.play(); }catch(e){ alert('Audio blocked by browser — interact with page first.'); }});
    $('stopMusic').addEventListener('click', ()=>{ if(audio) audio.pause(); });
    $('copyTasks').addEventListener('click', ()=>{ const txt = tasks.map(t=> (t.done? '[x] ':'[ ] ')+t.title).join('\n'); navigator.clipboard.writeText(txt).then(()=>alert('Tasks copied to clipboard')); });

    // ------------------ Theme toggle ------------------
    const themeToggle = $('themeToggle'); let dark=true;
    themeToggle.addEventListener('click', ()=>{
      dark = !dark; if(!dark){ document.body.style.background='linear-gradient(180deg,#f7fafc,#e6eef6)'; document.body.style.color='#042027'; }else{ document.body.style.background='linear-gradient(180deg,#071021,#071527)'; document.body.style.color='#e6eef6'; }
    });

    // ------------------ Notifications permission ------------------
    function notify(msg){ if(!('Notification' in window)) return; if(Notification.permission==='granted'){ new Notification(msg); } else if(Notification.permission!=='denied'){ Notification.requestPermission().then(p=>{ if(p==='granted') new Notification(msg); }); } }

    // init display
    updateDisplay();

    // small UX: press A to add sample tasks
    document.addEventListener('keydown', e=>{ if(e.key.toLowerCase()==='a' && e.ctrlKey){ tasks.unshift({title:'Quick task added via Ctrl+A', done:false}); renderTasks(); }});

    // end of script
  </script>
</body>
</html>


